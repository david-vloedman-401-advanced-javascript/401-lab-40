(window.webpackJsonptodo=window.webpackJsonptodo||[]).push([[0],{181:function(e,t,n){e.exports={modal:"modal_modal__2bhYs"}},184:function(e,t,n){e.exports=n(397)},195:function(e,t){},197:function(e,t){},233:function(e,t){},234:function(e,t){},357:function(e,t,n){},396:function(e,t,n){},397:function(e,t,n){"use strict";n.r(t);var a=n(14),o=n(15),l=n(17),c=n(16),r=n(18),i=n(0),u=n.n(i),s=n(70),d=n.n(s),m=n(28),h=u.a.createContext(),p=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(l.a)(this,Object(c.a)(t).call(this,e))).state={maxVisible:5,showCompleted:!0},n}return Object(r.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return u.a.createElement(h.Provider,{value:this.state},this.props.children)}}]),t}(u.a.Component),f=n(105),E=n.n(f),b=n(53),g=n.n(b),v=u.a.createContext(),O=function(e){function t(e){var n;Object(a.a)(this,t),(n=Object(l.a)(this,Object(c.a)(t).call(this,e))).login=function(e){g.a.save("auth",e),n.setLoginState(!0)},n.logout=function(){g.a.remove("auth"),n.setLoginState(!1)},n.setLoginState=function(e){var t=g.a.load("auth");n.setState({token:t,loggedIn:e})};var o=new URLSearchParams(window.location.search),r=g.a.load("auth"),i=o.get("token")||r||null;return n.state={loggedIn:!!i,token:i,login:n.login,logout:n.logout},n}return Object(r.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return u.a.createElement(v.Provider,{value:this.state},this.props.children)}}]),t}(u.a.Component),j=n(7),y=n(177),C=n(400),D=n(178),T=n(182),L=n(24),x={todoList:[],showDetails:null,details:{}},S=Object(j.combineReducers)({todo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"DETAILS":var o=e.todoList.filter((function(e){return e._id===a}))[0]||{};return Object(L.a)({},e,{showDetails:!e.showDetails,details:o});case"GET":return Object(L.a)({},e,{todoList:a});case"POST":return Object(L.a)({},e,{todoList:[].concat(Object(T.a)(e.todoList),[a])});case"TOGGLE":return Object(L.a)({},e,{todoList:e.todoList.map((function(e){return e._id===a?Object(L.a)({},e,{complete:!e.complete}):e}))});case"DELETE":return Object(L.a)({},e,{todoList:e.todoList.filter((function(e){return e._id!==a}))});default:return e}},form:C.a}),k=function(){return Object(j.createStore)(S,Object(y.composeWithDevTools)(Object(j.applyMiddleware)(D.a)))},w=n(36),I=n(180),P=n.n(I),_=(n(357),function(e){return e.condition?e.children:null}),G=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(l.a)(this,Object(c.a)(t).call(this,e))).handleChange=function(e){n.setState(Object(w.a)({},e.target.name,e.target.value))},n.handleSubmit=function(e){e.preventDefault(),P.a.post("".concat("https://api-js401.herokuapp.com","/signin")).auth(n.state.username,n.state.password).set("mode","cors").then((function(e){var t=e.text;n.context.login(t)})).catch((function(e){return console.error(e)}))},n.state={username:"",password:""},n}return Object(r.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return u.a.createElement("div",{id:"login"},u.a.createElement("h2",null,"ToDoodles To-do"),u.a.createElement(_,{condition:this.context.loggedIn},u.a.createElement("button",{onClick:this.context.logout},"Log Out ")),u.a.createElement(_,{condition:!this.context.loggedIn},u.a.createElement("form",{id:"loginForm",onSubmit:this.handleSubmit},u.a.createElement("input",{placeholder:"username",name:"username",onChange:this.handleChange}),u.a.createElement("input",{placeholder:"password",name:"password",onChange:this.handleChange}),u.a.createElement("input",{type:"submit",value:"login"}))))}}]),t}(u.a.Component);G.contextType=v;var A=G,N=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e?t:null},F=function(e){return N(e.condition,e.children)},J=function(e){return N(!e.condition,e.children)},R=n(73),V=function(e){var t=Object(i.useState)({}),n=Object(R.a)(t,2),a=n[0],o=n[1];return{handleChange:function(e){e.persist(),o((function(t){return Object(L.a)({},t,Object(w.a)({},e.target.name,e.target.value))}))},handleSubmit:function(t){t&&t.preventDefault(),e(a)},values:a}},U=n(399),B=n(398),M=Object(B.a)({form:"todo"})((function(e){var t=V(e.handleSubmit),n=t.handleChange,a=t.handleSubmit;return u.a.createElement(u.a.Fragment,null,u.a.createElement("h3",null,"Add Item"),u.a.createElement("form",{onChange:n,onSubmit:a},u.a.createElement("label",null,u.a.createElement("span",null,"To Do Item"),u.a.createElement(U.a,{name:"text",component:"input",placeholder:"Add To Do List Item"})),u.a.createElement("label",null,u.a.createElement("span",null,"Difficulty Rating"),u.a.createElement(U.a,{type:"range",component:"input",min:"1",max:"5",name:"difficulty"})),u.a.createElement("label",null,u.a.createElement("span",null,"Assigned To"),u.a.createElement(U.a,{type:"text",component:"input",name:"assignee",placeholder:"Assigned To"})),u.a.createElement("label",null,u.a.createElement("span",null,"Due"),u.a.createElement(U.a,{component:"input",type:"date",name:"due"})),u.a.createElement("button",null,"Add Item")))})),W=function(e){var t=Object(i.useState)(0),n=Object(R.a)(t,2),a=n[0],o=n[1],l=Object(i.useContext)(h),c=l.maxVisible*a,r=c+l.maxVisible,s=e.list.todoList?e.list.todoList.slice(c,r):[];return u.a.createElement(u.a.Fragment,null,u.a.createElement("ul",null,s.map((function(t){return u.a.createElement(J,{condition:t.complete&&!l.showCompleted},u.a.createElement("li",{className:"complete-".concat(t.complete.toString()),key:t._id},u.a.createElement("span",{onClick:function(){return e.handleComplete(t._id)}},t.text),u.a.createElement("button",{onClick:function(){return e.handleDetails(t._id)}},"Details"),u.a.createElement("button",{onClick:function(){return e.handleDelete(t._id)}},"Delete")))}))),u.a.createElement(F,{condition:a>0},u.a.createElement("button",{onClick:function(){return o(a-1)}},"Previous")),u.a.createElement(F,{condition:e.list.todoList.length>r},u.a.createElement("button",{onClick:function(){return o(a+1)}},"Next")))},X=n(181),Y=n.n(X),q=function(e){return u.a.createElement("div",{className:Y.a.modal},u.a.createElement("div",null,u.a.createElement("header",null,u.a.createElement("span",{className:"title"},e.title),u.a.createElement("button",{onClick:e.close},"X")),u.a.createElement("div",null,e.children)))},z=function(e){var t=e.item||{};return u.a.createElement(q,{title:"To Do Item",close:e.handleDetails},u.a.createElement("div",{className:"todo-details"},u.a.createElement("header",null,u.a.createElement("span",null,"Assigned To: ",t.assignee),u.a.createElement("span",null,"Due: ",t.due)),u.a.createElement("div",{className:"item"},t.text)))},H=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"get",n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;return fetch(e,{method:t,mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json"},body:n?JSON.stringify(n):void 0}).then((function(e){return e.json()})).then((function(e){return"function"===typeof a?a(e):e})).catch((function(e){return"function"===typeof o?o(e):console.error(e)}))},K="https://api-js401.herokuapp.com/api/v1/todo",Q=function(e){return{type:"GET",payload:e}},Z=function(e){return{type:"POST",payload:e}},$=function(e){return{type:"DELETE",payload:e}},ee=function(e){return e.condition?e.children:null},te=function(e){function t(){return Object(a.a)(this,t),Object(l.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(r.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=!1,t={};try{t=this.context.token?E.a.verify(this.context.token,"supersecret"):{},e=this.context.loggedIn&&(!this.props.capability||t.capabilities.includes(this.props.capability))}catch(n){}return u.a.createElement(ee,{condition:e},u.a.createElement("div",null,this.props.children))}}]),t}(u.a.Component);te.contextType=v;var ne=te,ae=(n(396),Object(m.b)((function(e){return{todo:e.todo}}),(function(e,t){return{handleGet:function(){return e((function(e){return H(K,"GET").then((function(t){return e(Q(t.results))})).catch(console.error)}))},handleDetails:function(t){return e({type:"DETAILS",payload:t})},handlePost:function(t){return e((n=t,function(e){return H(K,"POST",n).then((function(t){console.log(t),e(Z(t))})).catch((function(e){return console.log(e)}))}));var n},handleToggle:function(t){return e((n=t,function(e){return console.log(n),H("".concat(K,"/").concat(n),"PUT",{complete:!0}).then((function(t){console.log(t),e(function(e){return{type:"TOGGLE",payload:e}}(n))})).catch((function(e){return console.log(e)}))}));var n},handleDelete:function(t){return e((n=t,function(e){return H("".concat(K,"/").concat(n),"DELETE").then((function(){return e($(n))})).catch(console.error)}));var n}}}))((function(e){var t=function(t){e.handleDetails(t)};return Object(i.useEffect)((function(){e.handleGet()})),u.a.createElement(u.a.Fragment,null,u.a.createElement(ne,{capability:"read"},u.a.createElement("header",{id:"todoCount"},u.a.createElement("h2",null,"There are"," ",e.todo.todoList.filter((function(e){return!e.complete})).length," Items To Complete"))),u.a.createElement("section",{className:"todo"},u.a.createElement(ne,{capability:"create"},u.a.createElement("div",null,u.a.createElement(M,{handleSubmit:function(t){t.complete=!1,e.handlePost(t)}}))),u.a.createElement(ne,{capability:"read"},u.a.createElement("div",null,u.a.createElement(W,{list:e.todo,handleComplete:function(t){e.handleToggle(t)},handleDetails:t,handleDelete:function(t){e.handleDelete(t)}})))),u.a.createElement(F,{condition:e.todo.showDetails},u.a.createElement(z,{handleDetails:t,item:e.todo.details})))}))),oe=function(e){function t(){return Object(a.a)(this,t),Object(l.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(r.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return u.a.createElement(u.a.Fragment,null,u.a.createElement(A,null),u.a.createElement(ae,null))}}]),t}(u.a.Component),le=k(),ce=function(e){function t(){return Object(a.a)(this,t),Object(l.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(r.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return u.a.createElement(m.a,{store:le},u.a.createElement(O,null,u.a.createElement(p,null,u.a.createElement(oe,null))))}}]),t}(u.a.Component),re=document.getElementById("root");d.a.render(u.a.createElement(ce,null),re)}},[[184,1,2]]]);
//# sourceMappingURL=main.ab057874.chunk.js.map